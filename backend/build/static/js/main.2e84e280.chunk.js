(this["webpackJsonpbooker-frontend"]=this["webpackJsonpbooker-frontend"]||[]).push([[0],{18:function(e,t,n){e.exports=n(28)},28:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),l=n(8),u=n(17),i=n(1),s=n(16);function m(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var p={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:m,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=m();return e?JSON.parse(atob(e.split(".")[1])).user:null}};var d={signup:function(e,t){fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userInfo:e})}).then((function(e){return e.json()})).then((function(e){e.token&&p.setToken(e.token),t(e.error)})).catch(console.log)},getUser:function(){return p.getUserFromToken()},logout:function(){p.removeToken()},login:function(e,t){return fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userInfo:e})}).then((function(e){return e.json()})).then((function(e){if(e.token)p.setToken(e.token);else var n=!0;t(n)})).catch(console.log)}},g=function(e){var t=e.label,n=e.value,a=e.type,o=e.handleChange;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10 col-sm-8 mx-auto"},r.a.createElement("label",{className:"d-block"},t),r.a.createElement("input",{className:"w-100",type:a,value:n,onChange:o})))},h=function(e){var t=e.children,n=e.title;return r.a.createElement("form",{className:"m-4 p-3"},r.a.createElement("h4",{className:"col-12 pb-2 text-center"},n),t)};var f=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),u=Object(l.a)(c,2),i=u[0],s=u[1],m=function(e){return function(t){return e(t.target.value)}};return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10 col-md-8 mx-auto m-4 border"},r.a.createElement(h,{title:"Sign Up"},r.a.createElement(g,{label:"Username",value:n,type:"text",handleChange:m(o)}),r.a.createElement(g,{label:"Password",value:i,type:"password",handleChange:m(s)})))))},v=function(e){var t=e.cb,n=Object(u.a)(e,["cb"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){var n=t(e);return n.props.user?n:r.a.createElement(i.a,{to:"/signup"})}}))};var E=function(){var e=Object(a.useState)(d.getUser()||void 0),t=Object(l.a)(e,2),n=t[0];return t[1],r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",render:function(e){return r.a.createElement("div",null,"Landing Page")}}),r.a.createElement(i.b,{path:"/login",render:function(e){return r.a.createElement(f,null)}}),r.a.createElement(i.b,{path:"/signup",render:function(e){return r.a.createElement(f,null)}}),r.a.createElement(i.b,{path:"/onboarding",render:function(e){return r.a.createElement("div",null,"Onboarding Page")}}),r.a.createElement(v,{exact:!0,path:"/swipe",user:n,cb:function(e){return r.a.createElement("div",null,"Swipe Page")}}),r.a.createElement(v,{path:"/profile/:username",user:n,render:function(e){return r.a.createElement("div",null,"Profile Page: ",e.match.params.username)}}),r.a.createElement(v,{path:"/matches",user:n,render:function(e){return r.a.createElement("div",null,"Matches Page")}}),r.a.createElement(v,{path:"/group/:groupName",user:n,render:function(e){return r.a.createElement("div",null,"Matches Page: ",e.match.params.groupName)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.2e84e280.chunk.js.map